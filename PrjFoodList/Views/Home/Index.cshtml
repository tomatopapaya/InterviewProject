@model IPagedList<PrjFoodList.Models.food>
@using PagedList
@using PagedList.Mvc

@{
    ViewBag.Title = "台北美食";
}
<style>
    .box {
        padding: 0.5rem 1rem
    }
</style>

<div style="margin-top: 2rem; display: flex; justify-content:space-between;">
    <h2 style="margin: 0;">美食清單</h2>

    <div style="display: flex; justify-content: flex-end; align-items: center">
        <p class="box">

            @if (User.Identity.Name != "")
            {
                @Html.ActionLink("美食新增", "Create")
            }
            @using (Html.BeginForm("Index", "Home", FormMethod.Get))
            {
                <p>
                    搜尋: @Html.TextBox("searchString")
                    <input type="submit" value="查詢" />
                </p>
            }
    </div>

</div>

    @*<p>@Html.CheckBox("chk01", true, null)學生</p>
        <p>@Html.CheckBox("chk02", false, null)上班族</p>*@
    <br />

    <div class="table-responsive">
        <table class="table">
            <tr>
                <th>編號</th>
                <th>
                    餐廳名稱
                    @*@Html.DisplayNameFor(model => model.fTitle)*@
                </th>
                <th>
                    類型
                </th>
                <th>
                    地址
                    @*@Html.DisplayNameFor(model => model.fAddress)*@
                </th>
                <th>
                    建立日期
                </th>
                <th></th>
                <th></th>
            </tr>

            @foreach (var item in Model)
            {
                string imgName = @item.fTitle + ".jpg";


                <tr>
                    <td>@item.fId</td>
                    <td>
                        @item.fTitle<br />
                        @*之後需要轉換成asp.net 超連結方式*@
                        <a href="~/Home/@item.fTitle">
                            @*<img src="~/Photos/@imgName" width="150" class="img-rounded" />*@
                            @if (item.fImg != null)
                            {
                                <img src="@Url.Action("GetImage", "Home", new { item.fId })" width="150" class="img-rounded" />
                            }
                        </a>
                    </td>
                    <td>
                        @item.ftype
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.fAddress)
                    </td>
                    <td>
                        @DateTime.Parse(item.fDate.ToString()).ToShortDateString()
                    </td>
                    <td>
                        @if (User.Identity.Name != "")
                        {
                            @Html.ActionLink("Edit", "Edit", new { id=item.fId }, new { @class = "btn btn-danger" })
                        }
                        else
                        {
                            <a href="https://www.google.com.tw/maps/place/@item.fAddress" class="btn btn-info" target="_blank">路線規劃</a>
                        }
                    </td>
                    <td>
                        @*@Html.ActionLink("Edit", "Edit", new { id=item.fId }) |*@
                        @*@Html.ActionLink("Details", "Details", new { id=item.fId }) |*@
                        @if (User.Identity.Name != "")
                        {
                            @Html.ActionLink("Delete", "Delete", new { id = item.fId }, new { onclick = "return confirm('確定刪除嗎?')", @class = "btn btn-danger" })
                        }
                        else 
                        {
                            <button>我的最愛</button>
                        }
                    </td>
                </tr>
            }

        </table>
    </div>

    @Html.PagedListPager(Model, page => Url.Action("Index", new { page }))
